swagger: "2.0"
info:
  title: dp-topic-api
  description: "This service is used to retrieve information about the Topic's used
  to categorize ONS data"
  version: 1.0.0
  license:
    name: "Open Government Licence v3.0"
    url: "http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
basePath: "/v1"
schemes:
  - http
tags:
  - name: "Topics"
  - name: "hello"
parameters:
  id:
    name: id
    description: "The ID of a topic"
    in: path
    type: string
    required: true
paths:
  /hello:
    get:
      tags:
        - hello
      summary: Example hello world endpoint
      description: Returns an example payload.
      produces:
        - application/json
      responses:
        200:
          description: OK
          schema:
            $ref: "#/definitions/HelloResponse"
        500:
          $ref: '#/responses/InternalError'
  /topics/{id}:
    get:
      tags:
        - "Topics"
      summary: "Get a topic by ID"
      description: "provides a high level description of the topic and relevant links"
      parameters:
        - $ref: '#/parameters/id'
      produces:
        - "application/json"
      responses:
        200:
          description: "Json object containing information about the topic"
          schema:
            $ref: '#/definitions/Topic'
        404:
          description: "Topic not found"
        500:
          $ref: '#/responses/InternalError'
  /topics/{id}/subtopics:
    get:
      tags:
        - "Topics"
      summary: "Get a list of subtopics"
      description: "Get a list of all documents for ID contained in the stored list of subtopics"
      parameters:
        - $ref: '#/parameters/id'
      produces:
        - "application/json"
      responses:
        200:
          description: "Json object containing an array of subtopics"
          schema:
            $ref: '#/definitions/ListOfTopics'
        404:
          description: "Subtopics not found"
        500:
          $ref: '#/responses/InternalError'
responses:
  InternalError:
    description: "Failed to process the request due to an internal error"
definitions:
  HelloResponse:
    type: object
    properties:
      message:
        type: string
        description: "Message returned by hello world endpoint"
        example: "Hello, world!"
  Topic:
    type: object
    properties:
      description:
        type: string
        description: "A description of the topic"
      title:
        type: string
        description: "The title of the topic"
      keywords:
        type: array
        items:
          type: string
        description: "List of keywords that relate to the topic"
      links:
        type: object
        properties:
          self:
            $ref: '#/definitions/SelfHref'
          subtopics:
            $ref: '#/definitions/SubtopicsLink'
          content:
            $ref: '#/definitions/ContentLink'
  SubtopicsLink:
    type: object
    description: "A link to the subtopics of this topic"
    properties:
      href:
        type: string
        description: "A URL to the subtopics of this topic"
  ContentLink:
    type: object
    description: "A link to the content for this topic"
    properties:
      href:
        type: string
        description: "A URL to the content for this topic"
  ListOfTopics:
    type: object
    description: "A list of Topics"
    properties:
      items:
        type: array
        items:
          $ref: '#/definitions/Topic'
      count:
        $ref: '#/definitions/Count'
      total_count:
        $ref: '#/definitions/TotalCount'
      limit:
        $ref: '#/definitions/Limit'
      offset:
        $ref: '#/definitions/Offset'
  SelfHref:
    type: object
    properties:
      id:
        type: string
        description: "The id of the resource"
      href:
        type: string
        description: "The URL to the resource"
  Count:
    type: string
    description: "The number of results returned in this response"
  TotalCount:
    type: string
    description: "The total number of results available"
  Limit:
    type: string
    description: "The limit applied to the number of results returned"
  Offset:
    type: string
    description: "The offset applied to the number of results returned"
