swagger: "2.0"
info:
  title: dp-areas-api
  description: "Digital Publishing areas API used to navigate profiles for different geographical areas across the UK"
  version: 1.0.0
  license:
    name: "Open Government Licence v3.0"
    url: "http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
basePath: "/v1"
schemes:
  - http
tags:
  - name: "Public"

parameters:
  id:
    name: id
    description: "Unique id of an area"
    in: path
    type: string
    required: true

paths:

  /v1/areas/{id}:
    get:
      tags:
        - "Public"
      summary: "Returns the latest version of an area - stubbed to return data for E92000001 / W92000004 only"
      description: "Returns an area for given id's E92000001 and W92000004 only"
      produces:
        - "application/json"
      parameters:
        - $ref: '#/parameters/id'
        - in: header
          type: string
          name: Accept-Language
          description: "The language type - 'en' for English, 'cy' for Cymraeg"
      responses:
        200:
          description: "Successfully returned an area for either E92000001 or W92000004 only"
          schema:
            $ref: "#/definitions/AreaData"
        404:
          $ref: "#/definitions/ErrorResponse"
        500:
          $ref: "#/definitions/ErrorResponse"

  /v1/areas/{id}/relations:
    get:
      tags:
        - "Public"
      summary: "Returns the latest version of an area realtionships- stubbed to return data for E92000001 / W92000004 only"
      description: "Returns an area for given id's E92000001 and W92000004 only"
      produces:
        - "application/json"
      parameters:
        - $ref: '#/parameters/id'
      responses:
        200:
          description: "Successfully returned an area relationships for either E92000001 or W92000004 only"
          schema:
            $ref: "#/definitions/AreaRelations"
        404:
          $ref: "#/definitions/ErrorResponse"
        500:
          $ref: "#/definitions/ErrorResponse"

definitions:
  AreaData:
    type: object
    required: ["id"]
    properties:
      code:
        type: string
        description: "The unique code for the area"
        example: "W92000004"
      name:
        type: string
        description: "The name of the area"
        example: "Wales"
      date_start:
        type: string
        description: "The date from which the area data became active"
        example: "Thu, 01 Jan 2009 00:00:00 GMT"
      date_end:
        type: string
        description: "The date from which the area data became inactive"
        example: "Thu, 01 Jan 2029 00:00:00 GMT"
      name_welsh:
        type: string
        description: "The Welsh version of the name field"
        example: "Cymru"
      geometry:
        type: object
        properties:
          coordinates:
            type: array
            items:
              description: "coordinates for boundary code"
              type: array
              example: "[[-3.31312158427656,53.35578183923212],[-3.312849585026868,53.35553905667192]]"
          type:
            type: string
            description: "coordinate type"
            example: "MutliPolygon"
      area_type:
        type: string
        description: "english or welsh label text"
        example: "Cymraeg"
      visible:
        type: boolean
        description: "whether we surface a page for this area or not"
        example: true
      ancestors:
        type: array
        properties:
          id:
            type: string
            description: "The unique code for the ancestors area"
            example: "W92000004"
          name:
            type: string
            description: "The name of the ancestors area"
            example: "ancestor"

  ErrorResponse:
    description: "A list of any errors"
    type: object
    properties:
      errors:
        type: array
        items:
          $ref: '#/definitions/ErrorObject'

  ErrorObject:
    description: "An individual error details"
    type: object
    properties:
      code:
        type: string
        description: "Code representing the type of error that occurred"
        enum:
          - "AcceptLanguageHeaderError"
          - "AreaDataIdGetError"
          - "MarshallingAreaDataError"
          - "AncestryDataGetError"
      description:
        type: string
        description: "Description of the error"
  AreaRelations:
    type: array
    properties:
      area_code:
        type: string
        description: "The unique code for the related area"
        example: "W92000004"
      area_name:
        type: string
        description: "The relationship type"
        example: "parent"
      href:
        type: string
        description: "reference link to get related area details"
        example: "v1/areas/W92000004"
